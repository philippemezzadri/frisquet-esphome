esphome:
  name: boiler
  includes:
  - custom_component.h

esp32:
  board: esp32dev
  framework:
    type: arduino

# esp32_ble_tracker:

# Enable logging
logger:
  level: DEBUG

# Enable Home Assistant API
api:

ota:
  password: "86d8d705bb585eaf7a68c592a025884c"

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Boiler Fallback Hotspot"
    password: "tzTyXUqS2i2e"

captive_portal:

web_server:
  port: 80
  
mqtt:
  broker: 192.168.1.127
  username: homeassistant
  password: !secret mqtt_password

dallas:
  - pin: GPIO26

sensor:
- platform: custom
  lambda: |-
    auto my_custom_sensor = new CustomComponent();
    App.register_component(my_custom_sensor);
    return {my_custom_sensor->boiler_mode, my_custom_sensor->boiler_setpoint};
   
  sensors:
  - name: "Boiler Mode"
    accuracy_decimals: 0
  - name: "Boiler Setpoint"
    unit_of_measurement: "Â°C"
    accuracy_decimals: 0
    
- platform: dallas
  address: 0xA2032131AB675C28
  name: "Boiler Inlet Water Temperature"

- platform: dallas
  address: 0xAB03213190136128
  name: "Boiler Return Water Temperature"   
